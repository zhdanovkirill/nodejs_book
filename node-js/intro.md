# Intro

## Що таке Node.js

Node.js - це система, яка виконує JavaScript окремо від вашого браузера. Можна сказати, що це самостійне середовище для JavaScript. Node.js можна встановити на сервер (як і Python) і виконувати на ньому ваш код, віддаючи результат виконання користувачам. На ньому ж можна робити окремі програми, використовуючи додаткові фреймворки. В основі Node js лежить розроблений Google двигун V8, який використовується в браузері Chrome і відповідає за компіляцію коду JavaScript у внутрішній код машини. На цьому причетність Google закінчується. Насправді платформу створив Райан Даль, а спонсорування її розробки займається компанія Joyent. Node js відноситься до подієво-орієнтованих систем і використовує модель виконання операцій введення-виведення (I/O) таким чином, що основний процес ніколи не блокується, за винятком рідкісних випадків. А відсутність єдиного блокованого потоку виконання дозволяє створювати ефективні, високопродуктивні та легко масштабовані серверні програми.

## Чому Node.js&#x20;

Якщо ви починали вивчати програмування, вам зрозуміла концепція послідовного виконання програми. Спочатку виконується перший рядок, потім другий, потім третій і так далі. Можливо, десь програма стрибне вперед-назад, десь закольцується, але загалом вона виконується лінійно. У JS є фішка - він вміє виконувати код паралельно (умовно кажучи). Програмісти називають це обробкою подій. Програмі можна сказати: «Якщо коли-небудь станеться ось це — виконайте ту функцію, вона знає, що робити». Таких подій можна передбачити багато — виходить, процеси начебто паралельні. Програма може просто сидіти та чекати, коли щось станеться. Більше того, процеси асинхронні: програма може запитати щось на самому початку роботи — наприклад, запитати щось у бази даних. І поки база даних свербить, програма на Node.js буде займатися далі своїми справами. А як прийде відповідь – візьме її та обробить. Під час розробки будь-якої програми на Node.js можуть виникнути сотні таких паралельних подій та обробників. Щоб ніхто з них не перетягував ковдру на себе, Node.js робить нескінченний цикл, в якому надає процесорний час кожної функції по колу. В результаті створюється ілюзія, що вони працюють паралельно і не заважають один одному, але насправді ними керує жорстка сама платформа. Саме такий рівномірний розподіл всього в циклі подій і дає Node.js перевагу при створенні серверних програм.

<figure><img src="../.gitbook/assets/event-loop.png" alt=""><figcaption><p>Демонстрація роботи node js</p></figcaption></figure>

## Приклад: веб-серверу на Node.js

### Як працює звичайний веб-сервер

Раніше була така проблема:

* На сторінці потрібно, показати аватарку та нікнейм користувача.
* Для цього сервер робить запит до бази даних, щоб отримати звідти цю інформацію.
* Поки база не відповість, сервер нічого не може зробити - він терпляче чекає.
* Сервер чекає.
* Коли від бази надходить відповідь з картинкою та нікнеймом, сервер знову оживає, продовжує завантажувати сторінку і насамкінець запитує у бази фонову картинку для сайту.
* Сервер чекає.
* Сторінка теж поки що не працює, бо не завантажилася до кінця. Половина скриптів теж не працюють, тому що вони чекають на повне завантаження сторінки. Усі чекають, доки база відповість.
* Кожен такий запит потрібні ресурси, щоб тримати з'єднання з базою.
* Якщо таких запитів багато, ресурси на сервері швидко закінчуються, і сайт починає гальмувати у всіх відразу.
* Сервер починає тупити і іноді вивалюється з помилкою.
* Сторінки падають, користувачі психують та йдуть на інший сайт.

