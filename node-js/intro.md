# Intro

## Що таке Node.js

Node.js - це система, яка виконує JavaScript окремо від вашого браузера. Можна сказати, що це самостійне середовище для JavaScript. Node.js можна встановити на сервер (як і Python) і виконувати на ньому ваш код, віддаючи результат виконання користувачам. На ньому ж можна робити окремі програми, використовуючи додаткові фреймворки. В основі Node js лежить розроблений Google двигун V8, який використовується в браузері Chrome і відповідає за компіляцію коду JavaScript у внутрішній код машини. На цьому причетність Google закінчується. Насправді платформу створив Райан Даль, а спонсорування її розробки займається компанія Joyent. Node js відноситься до подієво-орієнтованих систем і використовує модель виконання операцій введення-виведення (I/O) таким чином, що основний процес ніколи не блокується, за винятком рідкісних випадків. А відсутність єдиного блокованого потоку виконання дозволяє створювати ефективні, високопродуктивні та легко масштабовані серверні програми.

## Чому Node.js&#x20;

Якщо ви починали вивчати програмування, вам зрозуміла концепція послідовного виконання програми. Спочатку виконується перший рядок, потім другий, потім третій і так далі. Можливо, десь програма стрибне вперед-назад, десь закольцується, але загалом вона виконується лінійно. У JS є фішка - він вміє виконувати код паралельно (умовно кажучи). Програмісти називають це обробкою подій. Програмі можна сказати: «Якщо коли-небудь станеться ось це — виконайте ту функцію, вона знає, що робити». Таких подій можна передбачити багато — виходить, процеси начебто паралельні. Програма може просто сидіти та чекати, коли щось станеться. Більше того, процеси асинхронні: програма може запитати щось на самому початку роботи — наприклад, запитати щось у бази даних. І поки база даних свербить, програма на Node.js буде займатися далі своїми справами. А як прийде відповідь – візьме її та обробить. Під час розробки будь-якої програми на Node.js можуть виникнути сотні таких паралельних подій та обробників. Щоб ніхто з них не перетягував ковдру на себе, Node.js робить нескінченний цикл, в якому надає процесорний час кожної функції по колу. В результаті створюється ілюзія, що вони працюють паралельно і не заважають один одному, але насправді ними керує жорстка сама платформа. Саме такий рівномірний розподіл всього в циклі подій і дає Node.js перевагу при створенні серверних програм.

<figure><img src="../.gitbook/assets/event-loop.png" alt=""><figcaption><p>Демонстрація роботи node js</p></figcaption></figure>

## Приклад: веб-серверу на Node.js

### Як працює звичайний веб-сервер

Раніше була така проблема:

* На сторінці потрібно, показати аватарку та нікнейм користувача.
* Для цього сервер робить запит до бази даних, щоб отримати звідти цю інформацію.
* Поки база не відповість, сервер нічого не може зробити - він терпляче чекає.
* Сервер чекає.
* Коли від бази надходить відповідь з картинкою та нікнеймом, сервер знову оживає, продовжує завантажувати сторінку і насамкінець запитує у бази фонову картинку для сайту.
* Сервер чекає.
* Сторінка теж поки що не працює, бо не завантажилася до кінця. Половина скриптів теж не працюють, тому що вони чекають на повне завантаження сторінки. Усі чекають, доки база відповість.
* Кожен такий запит потрібні ресурси, щоб тримати з'єднання з базою.
* Якщо таких запитів багато, ресурси на сервері швидко закінчуються, і сайт починає гальмувати у всіх відразу.
* Сервер починає тупити і іноді вивалюється з помилкою.
* Сторінки падають, користувачі психують та йдуть на інший сайт.

### Як працює сервер на Node.js

* На сторінці потрібно, показати аватарку та нікнейм користувача.
* Для цього сервер запитує до бази даних, щоб отримати звідти цю інформацію, а сам продовжує формувати сторінку далі.
* Поки не прийшла аватарка, сервер вже зробив все інше і побачив, що потрібна фонова картинка.
* Сервер запитує картинку, а тим часом йому прийшла аватарка з минулого запиту.
* Якщо аватарка прийшла, сервер вставляє її на потрібне місце.
* Поки він це робив, прийшла фонова картинка.
* Всі матеріали на місці можна показувати сторінку користувачу.
* Сторінка завантажується швидше, тому що складання відбулося паралельно.

## Навіщо ще потрібен Node.js

Крім веб-застосунків цю мову використовують для створення будь-яких сервісів, де потрібен постійний обмін інформацією з користувачем:

* Чати;
* Соціальні мережі;
* Системи спільної роботи над проектом;
* Онлайн-редакторы текста;
*   інше;



А ще на ньому можна написати практично будь-яку програму і запустити її під Windows, MacOs або Linux. Це можна використовувати для розробки універсальних програм, наприклад списку завдань, який повинен працювати на всіх платформах, синхронізувати дані в реальному часі і вміти відправляти все на мобільний пристрій.

Останнім часом велику популярність набирає використання Node.js для «Smart home» — розумних чайників, терезів та іншої побутової техніки. Тут Node.js допомагає керувати цими приладами та робити сервери, які можуть опрацьовувати багато запитів одночасно.

## Хто це використовує

Node.js в якості основи для своєї платформи вибрали багато відомих компаній:

* Walmart - найбільша мережа американських роздрібних магазинів;
* LinkedIn - соціальна мережа ділових контактів;
* Uber - таксі;
* E-bay - аукціон-платформа для продажу товарів по всьому світу;
* GitHub - репозиторій проектів для програмістів;
* Netflix - виробництво та зйомка серіалів;
* Trello - сервіс для управління проектами;
* інші.

